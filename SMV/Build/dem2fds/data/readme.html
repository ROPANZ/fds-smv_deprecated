<html>
<head>
<TITLE>Creating Terrain Files</TITLE>
</head>

<BODY BGCOLOR="#FFFFFF" >
<h3>Creating FDS Terrain Input Files</h3>
<ul>
<li><a href="#preliminaries">Preliminaries</a>
<li><a href="#elevation">Obtaining Elevation Data</a>
<li><a href="#images">Obtaining Images</a>
<li><a href="#fdsinput">Creating an FDS Input File</a>
<li><a href="#dem2fds">DEM2FDS Input Keywords</a>
<li><a href="#examples">Examples</a>
</ul>
<p><hr>

<a name=preliminaries><a>
<h4>Preliminaries</h4>
  Install or verify that the following is installed:

<ul>
  <li>  latest 
  <a href="https://pages.nist.gov/fds-smv/downloads.html" target="_blank">release</a>
  or
  <a href="https://drive.google.com/folderview?id=0B_wB1pJL2bFQc1F4cjJWY2duWTA&usp=sharing" target="_blank">test</a>
FDS and Smokeview
  <li>  <a href="http://www.imagemagick.org/script/binary-releases.php" target="_blank">Imagemagick</a> - used to convert downloaded images
files from jpeg 2000 to jpeg format
</ul>

<h4>Creating an FDS Input File</h4>
<li> Go to the <a href="https://viewer.nationalmap.gov/basic/" target="_blank">USGS National Map</a> website.  
A map of the United States is on the right and a set of data options on the left.
We will be using the <em>Elevation Products (3DEP)</em> option to obtain elevation data
and the <em>Imagery - 1 meter (NAIP)</em> option to obtain images.
<ol>
<a name="elevation"><a>
  <li> Obtaining Elevation data
<ol>
<li>Select the <em>Elevation Products (3DEP)</em> checkbox.
<li>Select 1/3 arc-second DEM checkbox
<li>Select the <em>GridFloat</em> File format option
<li>Click on the map and zoom in on a region of interest.
<li>Click on the <em>Find Products</em> button.  You should see one or more 
entries listed with headings beginning with
USGS NED 1/3 arc-second ...... 1 x 1 degree .  Make sure that <em>GridFloat</em> is listed in heading
(if not, click on Return to Search and verify you selected <em>GridFloat</em> option)
<li>Click on the <em>Footprint</em> link to verify where various files are located.
<li>Click on <em>Download</em> link to download files of interest.
<li>Unzip these files (using a program like winzip). Copy the .flt and .hdr files to a directory. 
</ol>
<a name="images"><a>
<li>Obtaining Image data
<ol>
<li>Click on the <em>Return to Search</em> button 
and uncheck (if checked) the <em>Elevation Products (3DEP)</em> checkbox
<li>Select the <em>Imagery - 1 meter (NAIP)</em> checkbox
<li>Click on the map and zoom in on 
a region of interest (same region selected for elevation files).
<li>Click on the <em>Find Products</em> button.  You should see one or more 
entries listed with headings beginning with <tt>m_</tt> and ending with <tt>.jp2</tt> .  
<li>Click on the <em>Footprint</em> link to verify where various files are located.
<li>Click on <em>Download</em> link to download files of interest. The image files should
cover the region you are using to define an FDS input file.
<li>Copy the downloaded files to the same directory you used to copy the .flt and .hdr elevation files.
<li>The .jp2 files you just downloaded are in <em>jpeg 2000</em> format.  
They need to be converted to jpeg format . To do this,
run the following command (on a PC) for each <em>jp2</em> file:
<pre>
  magick imagefilename.jp2 imagefilename.jpg
</pre>
Notes:
<ul>
<li>make sure that you installed Imagemagick
<li>the command <em>magick</em> is named <em>convert</em> on a Linux or Mac
</ul>
</ol>



<a name="fdsinput"><a>
<li> Creating an FDS input file

   <ol>
<li>create a file named <tt>casename.in</tt> containing the following lines 
(other methods are described below)
<br>
<pre>
GRID
  ibar jbar kbar
LONGLATMINMAX
  longmin  longmax latmin latmax
</pre>
where <tt>ibar</tt> and <tt>jbar</tt> are the number of longitude and latitidude divisions
and <tt>kbar</tt> is the number of z direction divisions and
<tt> longmin  longmax </tt> are the minimum and maximum longitude of the region  modeled,
<tt> latmin  latmax </tt> are the miniumum and maximum latitude of the region modeled.

     <li>Run the command:<br>
<pre>
 dem2fds -d elevation_directory -o casename.in
</pre>
where <tt>elevation_directory</tt> is the path for the directory containing the elevation and image files you downloaded.
<li>An FDS input file has been created.  To view the case, run the commands:
<pre>
fds casename.fds
smokeview casename
</pre>
   </ol>

Note, the FDS input file, <em>casename.fds</em> is only a starting point.  You will need to
edit it to model your scenario as you wish.
</ol>

<a name="dem2fds"><a>
<h4>DEM2FDS Input Keywords</h4>
<ul>
<li><tt>GRID</tt>
<li><tt>LONGLATCENTER</tt>
<li><tt>LONGLATORIG</tt>
<li><tt>LONGLATMINMAX</tt>
</ul>

<a name="examples"><a>
<h4>Examples</h4>

</BODY>
</HTML>

